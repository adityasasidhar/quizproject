{% extends "base.html" %}

{% block title %}Submissions - {{ assignment.title }}{% endblock %}

{% block content %}
<h2 class="mb-3">Submissions for: {{ assignment.title }}</h2>
<p class="text-muted">Class: {{ classroom.name }}</p>

{% if submissions %}
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th>Student</th>
          <th>Score</th>
          <th>Percentage</th>
          <th>Submitted At</th>
        </tr>
      </thead>
      <tbody>
        {% for s in submissions %}
          <tr>
            <td>{{ user_map.get(s.user_id, s.user_id) }}</td>
            <td>{{ s.score }}/{{ s.total }}</td>
            <td>{{ '%.1f'|format(s.percentage) }}%</td>
            <td>{{ s.submitted_at.strftime('%Y-%m-%d %H:%M') }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <div class="alert alert-info">No submissions yet.</div>
{% endif %}

<a class="btn btn-secondary" href="{{ url_for('classroom_view', class_id=classroom.id) }}">Back to Classroom</a>
{% endblock %}